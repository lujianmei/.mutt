[general]
ui = TTYUI
accounts = TRS
pythonfile = ~/.mutt/source/offlineimap.py
fsync = False

[Account TRS]
localrepository = TRS-Local
remoterepository = TRS-Remote
status_backend = sqlite
postsynchook = notmuch new
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10

[Repository TRS-Local]
type = Maildir
localfolders = ~/.mutt/mails/lu.jianmei/
nametrans = lambda folder : {'drafts':   'Mail/Drafts',
                            'inbox':     'Mail/Inbox',
                            'sent':     'Mail/Sent Mail',
#                            'flagged':  '[TRS]/Starred',
                            'trs':  'Mail/trs',
                            'haier':  'Mail/haier',
                            'pm':  'Mail/pm',
#                            'trash':    '[TRS]/Bin',
                            'archive':  'Mail/All Mail',
                           }.get(folder, folder)

[Repository TRS-Remote]
sslcacertfile=/etc/ssl/certs/ca-certificates.crt
maxconnections = 2
type = IMAP
#auth = on
#ssl = yes
reference = Mail
remotehost = imap.qiye.163.com
remoteuser = lu.jianmei@trs.com.cn
#remoteport = 993

#remotepasseval = get_gpg_pass(keyfile="/home/kevin/.mutt/.my-pwds.gpg")
realdelete = no
startdate = 2015-04-01
nametrans = lambda folder : {'Mail/Drafts':     'drafts',
                            'Mail/Inbox':  'inbox',
                            'Mail/Sent':  'sent',
#                            '[TRS]/Starred':    'flagged',
                            'Mail/TRS':    'trs',
                            'Mail/haier':    'haier',
                            'Mail/pm':    'pm',
                            'Mail/Bin':        'trash',
                            'Mail/All Mail':   'archive',
                           }.get(folder, folder)
#folderfilter = lambda folder: folder not in ['/Bin', '/Spam','[TRS]/akamai','[TRS]/errors','[TRS]/me','[TRS]/nagios']
folderfilter = lambda folder: folder in ['Mail/Inbox','Mail/Sent','Mail/Drafts', 'Mail/trs','Mail/haier','Mail/pm']
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes