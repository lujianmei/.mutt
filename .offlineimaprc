[general]
ui = TTYUI
accounts = TRS
pythonfile = ~/.mutt/source/offlineimap.py
fsync = False

[Account TRS]
localrepository = TRS-Local
remoterepository = TRS-Remote
status_backend = sqlite
postsynchook = notmuch new
# Minutes between syncs
autorefresh = 5
# Number of quick-syncs between autorefreshes. Quick-syncs do not update if the
# only changes were to IMAP flags
quick = 10

[Repository TRS-Local]
type = Maildir
localfolders = ~/.mutt/mails/lu.jianmei/
nametrans = lambda foldername: foldername.decode('imap4-utf-7').encode('utf-8')
#nametrans = lambda folder : {'drafts':   '草稿箱',
#                            'inbox':     'Inbox',
#                            'sent':     '已发送',
##                            'flagged':  '[TRS]/Starred',
#                            'trs':  'trs',
#                            'haier':  'haier',
#                            'pm':  'pm',
##                            'trash':    '[TRS]/Bin',
#                            'archive':  'All Mail',
##                           }.get(folder.decode('imap4-utf-7').encode('utf-8'), folder.decode('imap4-utf-7').encode('utf-8'))
#                           }.get(folder.decode('imap4-utf-7').encode('utf-8'), folder.decode('imap4-utf-7').encode('utf-8'))

[Repository TRS-Remote]
sslcacertfile=/etc/ssl/certs/ca-certificates.crt
maxconnections = 2
type = IMAP
auth = on
ssl = yes
#reference = Mail
remotehost = imap.qiye.163.com
remoteuser = lu.jianmei@trs.com.cn
remoteport = 993
#remotepass = ljm_07102049610
remotepasseval = get_gpg_pass(keyfile="/home/kevin/.mutt/.my-pwds.gpg")
realdelete = no
startdate = 2015-04-01
# solve foldername encoding, for supporting chinese foldername in remote server
# foldername: foldername.decode('imap4-utf-7').encode('utf-8')
#nametrans = lambda folder: foldername.decode('imap4-utf-7').encode('utf-8') : {'Drafts':     'drafts',
nametrans = lambda folder: folder.decode('imap4-utf-7').encode('utf-8')
###nametrans = lambda folder : {'草稿箱':     'drafts',
###                            'INBOX':  'inbox',
###                            '已发送':  'sent',
####                            '[TRS]/Starred':    'flagged',
###                            'trs':    'trs',
###                            'haier':    'haier',
###                            'pm':    'pm',
####                            'Bin':        'trash',
###                            'All Mail':   'archive',
####                           }.get(folder.decode('imap4-utf-7').encode('utf-8'), folder.decode('imap4-utf-7').encode('utf-8'))
###                           }.get(folder, folder.decode('imap4-utf-7').encode('utf-8'))

#folderfilter = lambda folder: folder not in ['/Bin', '/Spam','[TRS]/akamai','[TRS]/errors','[TRS]/me','[TRS]/nagios']
folderfilter = lambda folder: folder in ['INBOX','已发送','草稿箱', 'trs','haier','pm']
# Instead of closing the connection once a sync is complete, offlineimap will
# send empty data to the server to hold the connection open. A value of 60
# attempts to hold the connection for a minute between syncs (both quick and
# autorefresh).This setting has no effect if autorefresh and holdconnectionopen
# are not both set.
keepalive = 60
# OfflineIMAP normally closes IMAP server connections between refreshes if
# the global option autorefresh is specified.  If you wish it to keep the
# connection open, set this to true. This setting has no effect if autorefresh
# is not set.
holdconnectionopen = yes